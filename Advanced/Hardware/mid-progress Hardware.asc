Version 4
SHEET 1 3312 2740
WIRE -144 704 -288 704
WIRE 48 704 -144 704
WIRE 304 704 48 704
WIRE 48 736 48 704
WIRE 704 736 624 736
WIRE 784 736 768 736
WIRE 896 736 864 736
WIRE 928 736 896 736
WIRE 1008 736 928 736
WIRE 1344 736 1264 736
WIRE 1504 736 1344 736
WIRE 1616 736 1504 736
WIRE 1856 736 1616 736
WIRE 304 752 304 704
WIRE -288 848 -288 704
WIRE 48 848 48 816
WIRE 1616 848 1616 736
WIRE 1856 880 1856 816
WIRE 1984 880 1856 880
WIRE 928 896 928 736
WIRE 1344 896 1344 736
WIRE 304 912 304 832
WIRE 416 912 304 912
WIRE 432 912 416 912
WIRE 1856 912 1856 880
WIRE 304 960 304 912
WIRE 48 976 48 928
WIRE 160 976 48 976
WIRE 176 976 160 976
WIRE 48 992 48 976
WIRE 656 1056 624 1056
WIRE 928 1056 928 960
WIRE 928 1056 656 1056
WIRE 1136 1056 1136 832
WIRE 1136 1056 928 1056
WIRE 1344 1056 1344 960
WIRE 1344 1056 1136 1056
WIRE 1616 1056 1616 928
WIRE 1616 1056 1344 1056
WIRE 1856 1056 1856 992
WIRE 1856 1056 1616 1056
WIRE 656 1072 656 1056
WIRE -288 1088 -288 928
WIRE -128 1088 -288 1088
WIRE 48 1088 48 1072
WIRE 48 1088 -128 1088
WIRE 304 1088 304 1040
WIRE 304 1088 48 1088
WIRE -112 1424 -144 1424
WIRE -16 1424 -48 1424
WIRE 1344 1488 1136 1488
WIRE 416 1504 384 1504
WIRE 544 1504 496 1504
WIRE 608 1504 544 1504
WIRE -144 1520 -144 1424
WIRE -128 1520 -144 1520
WIRE -16 1520 -16 1424
WIRE -16 1520 -48 1520
WIRE 544 1536 544 1504
WIRE 1248 1536 1248 1520
WIRE 1136 1552 1136 1488
WIRE 1216 1552 1136 1552
WIRE 1344 1568 1344 1488
WIRE 1344 1568 1280 1568
WIRE 1456 1568 1344 1568
WIRE -256 1584 -288 1584
WIRE -144 1584 -144 1520
WIRE -144 1584 -176 1584
WIRE 1216 1584 1120 1584
WIRE -144 1600 -144 1584
WIRE -112 1600 -144 1600
WIRE -16 1616 -16 1520
WIRE -16 1616 -48 1616
WIRE 16 1616 -16 1616
WIRE 1248 1616 1248 1600
WIRE -112 1632 -144 1632
WIRE 544 1632 544 1600
WIRE -256 1648 -288 1648
WIRE -144 1648 -144 1632
WIRE -144 1648 -176 1648
WIRE -112 1648 -144 1648
WIRE -144 1664 -144 1648
WIRE -112 1680 -112 1648
WIRE -16 1680 -112 1680
WIRE -16 1696 -16 1680
WIRE -144 1760 -144 1744
WIRE 1312 1984 1312 1920
WIRE 1280 2000 1104 2000
WIRE 1440 2016 1344 2016
WIRE 1280 2032 1184 2032
WIRE 1184 2064 1184 2032
WIRE 1184 2080 1184 2064
WIRE 496 2096 464 2096
WIRE 624 2096 576 2096
WIRE 688 2096 624 2096
WIRE 1312 2096 1312 2048
WIRE 1312 2112 1312 2096
WIRE -112 2128 -144 2128
WIRE -16 2128 -48 2128
WIRE 624 2128 624 2096
WIRE -144 2208 -144 2128
WIRE -128 2208 -144 2208
WIRE -16 2208 -16 2128
WIRE -16 2208 -48 2208
WIRE 624 2224 624 2192
WIRE -256 2272 -288 2272
WIRE -144 2272 -144 2208
WIRE -144 2272 -176 2272
WIRE -144 2288 -144 2272
WIRE -112 2288 -144 2288
WIRE -16 2304 -16 2208
WIRE -16 2304 -48 2304
WIRE 16 2304 -16 2304
WIRE -112 2320 -144 2320
WIRE -256 2336 -288 2336
WIRE -144 2336 -144 2320
WIRE -144 2336 -176 2336
WIRE -128 2336 -144 2336
WIRE -144 2352 -144 2336
WIRE -128 2352 -128 2336
WIRE -96 2352 -128 2352
WIRE -96 2368 -96 2352
WIRE -16 2368 -96 2368
WIRE -144 2448 -144 2432
WIRE 1248 2496 1248 2464
WIRE 1104 2512 1088 2512
WIRE 1216 2512 1104 2512
WIRE 1424 2528 1280 2528
WIRE 1168 2544 1152 2544
WIRE 1216 2544 1168 2544
WIRE 1248 2624 1248 2560
FLAG -208 288 0
FLAG -128 1088 0
FLAG -208 208 5V
FLAG -144 704 Vac
FLAG 656 1072 0
FLAG -48 288 0
FLAG -48 208 2V1
FLAG 144 288 0
FLAG 144 208 Vsens
FLAG 160 976 Vis
FLAG 416 912 Vvs
FLAG -80 1648 0
FLAG -80 1584 5V
FLAG -288 1648 Vis
FLAG -288 1584 0
FLAG 16 1616 Vio
FLAG -144 1760 Voffset
FLAG -80 2336 0
FLAG -80 2272 5V
FLAG -288 2336 Vvs
FLAG -288 2272 0
FLAG 16 2304 Vvo
FLAG -144 2448 Voffset
FLAG 624 736 Vac
FLAG 1504 736 5V
FLAG 544 1632 0
FLAG 384 1504 Vio
FLAG 608 1504 Vifilter
FLAG 400 288 0
FLAG 400 208 Vopamp
FLAG 896 736 Vin
FLAG 1984 880 V2.1
FLAG 1120 1584 V2.1
FLAG 1456 1568 Voffset
FLAG 624 2224 0
FLAG 464 2096 Vvo
FLAG 688 2096 Vvfilter
FLAG 1248 1520 5V
FLAG 1248 1616 0
FLAG 1184 2064 Vvfilter
FLAG 1440 2016 Vvinterrupt
FLAG 1424 2528 Viinterrupt
FLAG 1248 2624 0
FLAG 1312 2096 0
FLAG 1312 1920 5V
FLAG 1248 2464 5V
FLAG 1104 2000 Voffset
FLAG 1104 2512 Voffset
FLAG 1168 2544 Vifilter
FLAG -16 1760 0
FLAG -16 2432 0
SYMBOL voltage -208 192 R0
SYMATTR InstName V1
SYMATTR Value 5V
SYMBOL voltage -288 832 R0
WINDOW 0 24 96 Left 2
WINDOW 3 22 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsupply1
SYMATTR Value SINE(0 21.778889 500)
SYMATTR Value2 AC 21.778889
SYMBOL PowerProducts/LT1085-5 1136 736 R0
SYMATTR InstName Reg1
SYMBOL res 1600 832 R0
SYMATTR InstName RL1
SYMATTR Value 100
SYMBOL res 880 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rin1
SYMATTR Value 33
SYMBOL diode 704 752 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL cap 912 896 R0
SYMATTR InstName Cin1
SYMATTR Value 47µ
SYMATTR SpiceLine Rser=0.001
SYMBOL cap 1328 896 R0
SYMATTR InstName Cout1
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=0.001
SYMBOL voltage -48 192 R0
SYMATTR InstName V2
SYMATTR Value 2.1V
SYMBOL voltage 144 192 R0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(0 0.5 500)
SYMATTR Value2 AC .1 0
SYMBOL res 32 832 R0
SYMATTR InstName Rload1
SYMATTR Value 5
SYMBOL ind 32 720 R0
SYMATTR InstName Lload1
SYMATTR Value 4mH
SYMBOL res 32 976 R0
SYMATTR InstName Rs1
SYMATTR Value 0.5
SYMBOL res 288 736 R0
SYMATTR InstName Ra1
SYMATTR Value 470k
SYMBOL res 288 944 R0
SYMATTR InstName Rb1
SYMATTR Value 22k
SYMBOL Opamps/opamp2 -80 1552 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U1
SYMATTR Value LM324
SYMBOL res -160 1632 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName R1
SYMATTR Value 22k
SYMBOL res -160 1568 R90
WINDOW 0 -32 53 VBottom 2
WINDOW 3 -32 55 VTop 2
SYMATTR InstName R2
SYMATTR Value 22k
SYMBOL res -32 1504 R90
WINDOW 0 -30 61 VBottom 2
WINDOW 3 -31 62 VTop 2
SYMATTR InstName R3
SYMATTR Value 47k
SYMBOL res -128 1760 R180
WINDOW 0 -62 57 Left 2
WINDOW 3 -44 34 Left 2
SYMATTR InstName R4
SYMATTR Value 47k
SYMBOL Opamps/opamp2 -80 2240 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U2
SYMATTR Value LM324
SYMBOL res -160 2320 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL res -160 2256 R90
WINDOW 0 -32 53 VBottom 2
WINDOW 3 -32 55 VTop 2
SYMATTR InstName R6
SYMATTR Value 120k
SYMBOL res -32 2192 R90
WINDOW 0 -30 61 VBottom 2
WINDOW 3 -31 62 VTop 2
SYMATTR InstName R7
SYMATTR Value 120k
SYMBOL res -128 2448 R180
WINDOW 0 -62 57 Left 2
WINDOW 3 -44 34 Left 2
SYMATTR InstName R8
SYMATTR Value 120k
SYMBOL res 512 1488 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName Rf1
SYMATTR Value 1.5k
SYMBOL cap 560 1600 R180
WINDOW 0 29 13 Left 2
WINDOW 3 33 -11 Left 2
SYMATTR InstName Cf1
SYMATTR Value 10nF
SYMBOL voltage 400 192 R0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value SINE(2.1 1 500)
SYMATTR Value2 AC 1 0
SYMBOL res 1840 720 R0
SYMATTR InstName R9
SYMATTR Value 470k
SYMBOL res 1840 896 R0
SYMATTR InstName R10
SYMATTR Value 330k
SYMBOL Opamps/opamp2 1248 1504 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U3
SYMATTR Value LM324
SYMBOL res 592 2080 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName Rf2
SYMATTR Value 1.5k
SYMBOL cap 640 2192 R180
WINDOW 0 29 13 Left 2
WINDOW 3 33 -11 Left 2
SYMATTR InstName Cf2
SYMATTR Value 10nF
SYMBOL Opamps/opamp2 1248 2464 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U4
SYMATTR Value LM324
SYMBOL Opamps/opamp2 1312 1952 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U5
SYMATTR Value LM324
SYMBOL cap -48 1408 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 0.3386275385n
SYMBOL cap -32 1696 R0
SYMATTR InstName C2
SYMATTR Value 0.3386275385n
SYMBOL cap -48 2112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 0.1326nF
SYMBOL cap -32 2368 R0
SYMATTR InstName C4
SYMATTR Value 0.159nF
TEXT 1072 224 Left 2 ;.ac dec 30 1 1Meg
TEXT 1072 160 Left 2 !.lib LM324.lib
TEXT -256 88 Left 2 ;Power/Signal Sources
TEXT 0 744 Right 2 ;Load \n(2.5VA-7.5VA)
TEXT 0 1032 Right 2 ;Current Sens\n(Shunt resistor)
TEXT 248 632 Left 2 ;Voltage Sens
TEXT 1064 96 Left 2 ;Simulation Commands\n- Change these as needed
TEXT 1072 192 Left 2 !.tran 0 0.5 0 0.01m
TEXT 1072 256 Left 2 !.ic V(Vin)=8
TEXT -248 -56 Left 2 ;/////////////////////////////////////////////////////\nLTspice simulation model for hardware of power monitor\nTeam-07-Sparkies\n/////////////////////////////////////////////////////
TEXT -264 568 Left 2 ;AC Source, Load and Sensors
TEXT -264 1152 Left 2 ;Notes:\n- Rs is the shunt resistor which does the current sensing\n-Vsupply is between 12.6-15.4Vrms\n-Rload is the variable resistor which changes from 5-105 ohms
TEXT 624 576 Left 2 ;Voltage regulator circuit.
TEXT -272 1384 Left 2 ;Current Sensor circuit
TEXT -272 2104 Left 2 ;Voltage Sensor Circuit.
TEXT 336 1432 Left 2 ;Low pass filter (Current Signal)
TEXT 352 2000 Left 2 ;Low pass filter (Voltage signal)
TEXT 1104 1400 Left 2 ;Voltage follower
TEXT 1104 1840 Left 2 ;Comparator (Voltage signal)
TEXT 1112 2376 Left 2 ;Comparator (Current Signal)
TEXT -312 1888 Left 2 ;Notes: \n-Amplifies current sensor signal \nand offsets it by 2.1 to avoid clipping
TEXT -288 2592 Left 2 ;Notes:\n-Amplifies voltage sensor signal and offsets signal\n by 2.1V to avoid clipping.
TEXT 328 1680 Left 2 ;Notes: \n-to remove high frequency noise from Current sensor\n-Designed to attenuate signals above 10kHz\nin order to remove noise from circuit.
TEXT 336 2256 Left 2 ;Notes:\n-to remove high frequency noise from voltage sensor\n-Designed to attenuate signals above 10kHz\nin order to remove noise from circuit.
TEXT 1072 1672 Left 2 ;Notes: \n- To stop loading of the Input
TEXT 1064 2152 Left 2 ;Notes: \n-for reference voltage crossing for voltage \nsensing signal.
TEXT 1064 2648 Left 2 ;Notes: \n- for reference voltage for current sensing signal.
TEXT 736 1136 Left 2 ;Notes: \nUsed to create 5V for Opamp's power supply and offset voltage.
RECTANGLE Normal 8 724 136 940 2
RECTANGLE Normal 8 968 136 1080 2
RECTANGLE Normal 252 676 388 1112 2
RECTANGLE Normal 1032 80 1468 284 2
